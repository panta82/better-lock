<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>BetterLock | better-lock</title><meta name="description" content="Documentation for better-lock"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">better-lock</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">better-lock</a></li><li><a href="../modules/_internal_.html">&lt;internal&gt;</a></li><li><a href="_internal_.BetterLock.html">BetterLock</a></li></ul><h1>Class BetterLock </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>Main better lock class.</p>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">BetterLock</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="_internal_.BetterLock.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="_internal_.BetterLock.html#DEFAULT_OPTIONS" class="tsd-kind-icon">DEFAULT_<wbr/>OPTIONS</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="_internal_.BetterLock.html#abort" class="tsd-kind-icon">abort</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="_internal_.BetterLock.html#abortAll" class="tsd-kind-icon">abort<wbr/>All</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter"><a href="_internal_.BetterLock.html#acquire" class="tsd-kind-icon">acquire</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="_internal_.BetterLock.html#canAcquire" class="tsd-kind-icon">can<wbr/>Acquire</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link">constructor<a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new <wbr/>Better<wbr/>Lock<span class="tsd-signature-symbol">(</span>options<span class="tsd-signature-symbol">?: </span><a href="../interfaces/BetterLockOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="_internal_.BetterLock.html" class="tsd-signature-type" data-tsd-kind="Class">BetterLock</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L33">better_lock.ts:33</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create a better lock instance</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> options: <a href="../interfaces/BetterLockOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockOptions</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="_internal_.BetterLock.html" class="tsd-signature-type" data-tsd-kind="Class">BetterLock</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="DEFAULT_OPTIONS" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> DEFAULT_<wbr/>OPTIONS<a href="#DEFAULT_OPTIONS" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">DEFAULT_<wbr/>OPTIONS<span class="tsd-signature-symbol">:</span> <a href="../interfaces/BetterLockOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockOptions</a><span class="tsd-signature-symbol"> = ...</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L21">better_lock.ts:21</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Default options to be used when creating BetterLock instances.</p>
</div></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="abort" class="tsd-anchor"></a><h3 class="tsd-anchor-link">abort<a href="#abort" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">abort<span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">?: </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L411">better_lock.ts:411</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Abort all jobs for a given key (or from the default job queue, if no key is given).
Job executors will not be called. Callbacks will be called with JobAbortedError.
Currently executing job will not be interrupted.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> key: <a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="abortAll" class="tsd-anchor"></a><h3 class="tsd-anchor-link">abort<wbr/>All<a href="#abortAll" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">abort<wbr/>All<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L426">better_lock.ts:426</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Abort all pending jobs from all queues.
Currently executing jobs will not be interrupted.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter"><a id="acquire" class="tsd-anchor"></a><h3 class="tsd-anchor-link">acquire<a href="#acquire" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter"><li class="tsd-signature tsd-kind-icon">acquire<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>executor<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#IPromiseExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">IPromiseExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, jobOptions<span class="tsd-signature-symbol">?: </span><a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-signature tsd-kind-icon">acquire<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>executor<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, jobOptions<span class="tsd-signature-symbol">?: </span><a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-signature tsd-kind-icon">acquire<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>executor<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, callback<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#ICallback" class="tsd-signature-type" data-tsd-kind="Type alias">ICallback</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, jobOptions<span class="tsd-signature-symbol">?: </span><a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-signature tsd-kind-icon">acquire<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol"> | </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol">[]</span>, executor<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#IPromiseExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">IPromiseExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, jobOptions<span class="tsd-signature-symbol">?: </span><a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-signature tsd-kind-icon">acquire<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol"> | </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol">[]</span>, executor<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, jobOptions<span class="tsd-signature-symbol">?: </span><a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-signature tsd-kind-icon">acquire<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol"> | </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol">[]</span>, executor<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, callback<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#ICallback" class="tsd-signature-type" data-tsd-kind="Type alias">ICallback</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span>, jobOptions<span class="tsd-signature-symbol">?: </span><a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L83">better_lock.ts:83</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Acquire the lock for given key or list of keys. If waiting on a list, keys will be acquired in order,
as they become free. Any deadlock prevention must be handled by the caller.</p>
</div><div><p>Once the lock is acquired, we will call the executor function, with a &quot;done&quot; method.
You must call &quot;done&quot; to release the lock. Alternatively, return a Promise; lock will be released
once promise resolves or rejects.</p>
<p>Return values from your executor will be passed to callback (or the resulting promise).</p>
</div></div><h4 class="tsd-type-parameters-title">Type parameters</h4><ul class="tsd-type-parameters"><li><h4>TResult</h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>executor: <a href="../modules/_internal_.html#IPromiseExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">IPromiseExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function that will run inside the lock. Required.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> jobOptions: <a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options to be applied on this job only</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h4></li><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L87">better_lock.ts:87</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Acquire the lock for given key or list of keys. If waiting on a list, keys will be acquired in order,
as they become free. Any deadlock prevention must be handled by the caller.</p>
</div><div><p>Once the lock is acquired, we will call the executor function, with a &quot;done&quot; method.
You must call &quot;done&quot; to release the lock. Alternatively, return a Promise; lock will be released
once promise resolves or rejects.</p>
<p>Return values from your executor will be passed to callback (or the resulting promise).</p>
</div></div><h4 class="tsd-type-parameters-title">Type parameters</h4><ul class="tsd-type-parameters"><li><h4>TResult</h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>executor: <a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function that will run inside the lock. Required.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> jobOptions: <a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options to be applied on this job only</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h4></li><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L91">better_lock.ts:91</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Acquire the lock for given key or list of keys. If waiting on a list, keys will be acquired in order,
as they become free. Any deadlock prevention must be handled by the caller.</p>
</div><div><p>Once the lock is acquired, we will call the executor function, with a &quot;done&quot; method.
You must call &quot;done&quot; to release the lock. Alternatively, return a Promise; lock will be released
once promise resolves or rejects.</p>
<p>Return values from your executor will be passed to callback (or the resulting promise).</p>
</div></div><h4 class="tsd-type-parameters-title">Type parameters</h4><ul class="tsd-type-parameters"><li><h4>TResult</h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>executor: <a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function that will run inside the lock. Required.</p>
</div></div></li><li><h5>callback: <a href="../modules/_internal_.html#ICallback" class="tsd-signature-type" data-tsd-kind="Type alias">ICallback</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function to be called after the executor finishes or if we never enter the lock (timeout, queue depletion). Leave out to use promises.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> jobOptions: <a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options to be applied on this job only</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L96">better_lock.ts:96</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Acquire the lock for given key or list of keys. If waiting on a list, keys will be acquired in order,
as they become free. Any deadlock prevention must be handled by the caller.</p>
</div><div><p>Once the lock is acquired, we will call the executor function, with a &quot;done&quot; method.
You must call &quot;done&quot; to release the lock. Alternatively, return a Promise; lock will be released
once promise resolves or rejects.</p>
<p>Return values from your executor will be passed to callback (or the resulting promise).</p>
</div></div><h4 class="tsd-type-parameters-title">Type parameters</h4><ul class="tsd-type-parameters"><li><h4>TResult</h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>key: <a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol"> | </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Named key or array of keys for this particular call. Calls with different keys will be run in parallel. Not required.</p>
</div></div></li><li><h5>executor: <a href="../modules/_internal_.html#IPromiseExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">IPromiseExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function that will run inside the lock. Required.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> jobOptions: <a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options to be applied on this job only</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h4></li><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L101">better_lock.ts:101</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Acquire the lock for given key or list of keys. If waiting on a list, keys will be acquired in order,
as they become free. Any deadlock prevention must be handled by the caller.</p>
</div><div><p>Once the lock is acquired, we will call the executor function, with a &quot;done&quot; method.
You must call &quot;done&quot; to release the lock. Alternatively, return a Promise; lock will be released
once promise resolves or rejects.</p>
<p>Return values from your executor will be passed to callback (or the resulting promise).</p>
</div></div><h4 class="tsd-type-parameters-title">Type parameters</h4><ul class="tsd-type-parameters"><li><h4>TResult</h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>key: <a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol"> | </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Named key or array of keys for this particular call. Calls with different keys will be run in parallel. Not required.</p>
</div></div></li><li><h5>executor: <a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function that will run inside the lock. Required.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> jobOptions: <a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options to be applied on this job only</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h4></li><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L106">better_lock.ts:106</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Acquire the lock for given key or list of keys. If waiting on a list, keys will be acquired in order,
as they become free. Any deadlock prevention must be handled by the caller.</p>
</div><div><p>Once the lock is acquired, we will call the executor function, with a &quot;done&quot; method.
You must call &quot;done&quot; to release the lock. Alternatively, return a Promise; lock will be released
once promise resolves or rejects.</p>
<p>Return values from your executor will be passed to callback (or the resulting promise).</p>
</div></div><h4 class="tsd-type-parameters-title">Type parameters</h4><ul class="tsd-type-parameters"><li><h4>TResult</h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>key: <a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol"> | </span><a href="../modules.html#BetterLockKey" class="tsd-signature-type" data-tsd-kind="Type alias">BetterLockKey</a><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Named key or array of keys for this particular call. Calls with different keys will be run in parallel. Not required.</p>
</div></div></li><li><h5>executor: <a href="../modules/_internal_.html#ICallbackExecutor" class="tsd-signature-type" data-tsd-kind="Type alias">ICallbackExecutor</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function that will run inside the lock. Required.</p>
</div></div></li><li><h5>callback: <a href="../modules/_internal_.html#ICallback" class="tsd-signature-type" data-tsd-kind="Type alias">ICallback</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TResult</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Function to be called after the executor finishes or if we never enter the lock (timeout, queue depletion). Leave out to use promises.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> jobOptions: <a href="../interfaces/BetterLockJobOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">BetterLockJobOptions</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options to be applied on this job only</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="canAcquire" class="tsd-anchor"></a><h3 class="tsd-anchor-link">can<wbr/>Acquire<a href="#canAcquire" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">can<wbr/>Acquire<span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/panta82/better-lock/blob/769de55/src/better_lock.ts#L56">better_lock.ts:56</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Returns true if the caller can <em>immediately</em> acquire the lock. There is nothing holding the key and nothing in the queue.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> key: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">boolean</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li><li class="current tsd-kind-namespace"><a href="../modules/_internal_.html">&lt;internal&gt;</a><ul><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/_internal_.__home_panta_dev_pantas_better_lock_src_errors_.html">&quot;/home/panta/dev/pantas/better-<wbr/>lock/src/errors&quot;</a></li></ul></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class tsd-parent-kind-namespace"><a href="_internal_.BetterLock.html" class="tsd-kind-icon">Better<wbr/>Lock</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="_internal_.BetterLock.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="_internal_.BetterLock.html#DEFAULT_OPTIONS" class="tsd-kind-icon">DEFAULT_<wbr/>OPTIONS</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="_internal_.BetterLock.html#abort" class="tsd-kind-icon">abort</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="_internal_.BetterLock.html#abortAll" class="tsd-kind-icon">abort<wbr/>All</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter"><a href="_internal_.BetterLock.html#acquire" class="tsd-kind-icon">acquire</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="_internal_.BetterLock.html#canAcquire" class="tsd-kind-icon">can<wbr/>Acquire</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>